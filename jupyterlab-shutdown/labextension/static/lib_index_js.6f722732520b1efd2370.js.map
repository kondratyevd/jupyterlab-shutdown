{"version":3,"sources":["webpack://jupyterlab-shutdown/./lib/index.js","webpack://jupyterlab-shutdown/./node_modules/@jupyterlab/application/style/buttons.css","webpack://jupyterlab-shutdown/./style/base.css","webpack://jupyterlab-shutdown/./style/index.css","webpack://jupyterlab-shutdown/./node_modules/@jupyterlab/application/style/buttons.css?ced7","webpack://jupyterlab-shutdown/./style/index.css?b7f0"],"names":[],"mappings":"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","file":"lib_index_js.6f722732520b1efd2370.js","sourcesContent":["import { IRouter } from '@jupyterlab/application';\nimport { Widget } from '@lumino/widgets';\nimport { ITopBar } from 'jupyterlab-topbar';\nimport { URLExt } from '@jupyterlab/coreutils';\nimport '@jupyterlab/application/style/buttons.css';\nimport '../style/index.css';\n// import { MainMenu } from '@jupyterlab/mainmenu';\nimport { Dialog, showDialog } from '@jupyterlab/apputils';\nimport { ServerConnection } from '@jupyterlab/services';\nconst extension = {\n    id: 'jupyterlab-shutdown:plugin',\n    autoStart: true,\n    requires: [IRouter, ITopBar],\n    activate: async (app, router, topBar) => {\n        const { commands } = app;\n        const customShutdown = 'hub:custom-shutdown';\n        commands.addCommand(customShutdown, {\n            label: 'Shut Down',\n            caption: 'Shut down user session',\n            execute: () => {\n                return showDialog({\n                    title: 'Shut down Analysis Facility session',\n                    body: 'Warning: unsaved data will be lost!',\n                    buttons: [\n                        Dialog.cancelButton(),\n                        Dialog.warnButton({ label: 'Shut Down' })\n                    ]\n                }).then(async (result) => {\n                    if (result.button.accept) {\n                        const setting = ServerConnection.makeSettings();\n                        const apiURL = URLExt.join(setting.baseUrl, 'api/shutdown');\n                        // Shutdown all kernel and terminal sessions before shutting down the server\n                        // If this fails, we continue execution so we can post an api/shutdown request\n                        try {\n                            await Promise.all([\n                                app.serviceManager.sessions.shutdownAll(),\n                                app.serviceManager.terminals.shutdownAll()\n                            ]);\n                        }\n                        catch (e) {\n                            // Do nothing\n                            console.log(`Failed to shutdown sessions and terminals: ${e}`);\n                        }\n                        return ServerConnection.makeRequest(apiURL, { method: 'POST' }, setting)\n                            .then(result => {\n                            if (result.ok) {\n                                // Close this window if the shutdown request has been successful\n                                const body = document.createElement('div');\n                                const p1 = document.createElement('p');\n                                p1.textContent =\n                                    'You have shut down the Analysis Facility session.';\n                                const baseUrl = new URL(setting.baseUrl);\n                                const link = document.createElement('a');\n                                link.href =\n                                    baseUrl.protocol + '//' + baseUrl.hostname + '/home';\n                                link.textContent =\n                                    'Click here or refresh the page to restart the session.';\n                                link.style.color = 'var(--jp-content-link-color)';\n                                body.appendChild(p1);\n                                body.appendChild(link);\n                                void showDialog({\n                                    title: 'Session closed.',\n                                    body: new Widget({ node: body }),\n                                    buttons: []\n                                });\n                                // window.close();\n                            }\n                            else {\n                                throw new ServerConnection.ResponseError(result);\n                            }\n                        })\n                            .catch(data => {\n                            throw new ServerConnection.NetworkError(data);\n                        });\n                    }\n                });\n            }\n        });\n        const shutdown = document.createElement('a');\n        shutdown.id = 'shutdown';\n        shutdown.innerHTML = 'Shut Down';\n        shutdown.addEventListener('click', () => {\n            commands.execute(customShutdown);\n        });\n        const widget = new Widget({ node: shutdown });\n        widget.addClass('jp-Button-flat');\n        topBar.addItem('shutdown-button', widget);\n    }\n};\nexport default extension;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"/*-----------------------------------------------------------------------------\\n| Variables\\n|----------------------------------------------------------------------------*/\\n\\n:root {\\n  --jp-flat-button-height: 24px;\\n  --jp-flat-button-padding: 8px 12px;\\n}\\n\\n/*-----------------------------------------------------------------------------\\n| Copyright (c) Jupyter Development Team.\\n| Distributed under the terms of the Modified BSD License.\\n|----------------------------------------------------------------------------*/\\n\\nbutton {\\n  border-radius: var(--jp-border-radius);\\n}\\n\\nbutton.jp-mod-styled.jp-mod-accept {\\n  background: var(--md-blue-500);\\n  border: 0;\\n  color: white;\\n}\\n\\nbutton.jp-mod-styled.jp-mod-accept:hover {\\n  background: var(--md-blue-600);\\n}\\n\\nbutton.jp-mod-styled.jp-mod-accept:active {\\n  background: var(--md-blue-700);\\n}\\n\\nbutton.jp-mod-styled.jp-mod-reject {\\n  background: var(--md-grey-500);\\n  border: 0;\\n  color: white;\\n}\\n\\nbutton.jp-mod-styled.jp-mod-reject:hover {\\n  background: var(--md-grey-600);\\n}\\n\\nbutton.jp-mod-styled.jp-mod-reject:active {\\n  background: var(--md-grey-700);\\n}\\n\\nbutton.jp-mod-styled.jp-mod-warn {\\n  background: var(--jp-error-color1);\\n  border: 0;\\n  color: white;\\n}\\n\\nbutton.jp-mod-styled.jp-mod-warn:hover {\\n  background: var(--md-red-600);\\n}\\n\\nbutton.jp-mod-styled.jp-mod-warn:active {\\n  background: var(--md-red-700);\\n}\\n\\n.jp-Button-flat {\\n  text-decoration: none;\\n  padding: var(--jp-flat-button-padding);\\n  color: var(--jp-warn-color1);\\n  font-weight: 500;\\n  background-color: transparent;\\n  height: var(--jp-private-running-shutdown-button-height);\\n  line-height: var(--jp-private-running-shutdown-button-height);\\n  transition: background-color 0.1s ease;\\n  border-radius: 2px;\\n}\\n\\n.jp-Button-flat:hover {\\n  background-color: rgba(153, 153, 153, 0.1);\\n}\\n\\n.jp-Button-flat:focus {\\n  border: none;\\n  box-shadow: none;\\n  background-color: rgba(153, 153, 153, 0.2);\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./node_modules/@jupyterlab/application/style/buttons.css\"],\"names\":[],\"mappings\":\"AAAA;;8EAE8E;;AAE9E;EACE,6BAA6B;EAC7B,kCAAkC;AACpC;;AAEA;;;8EAG8E;;AAE9E;EACE,sCAAsC;AACxC;;AAEA;EACE,8BAA8B;EAC9B,SAAS;EACT,YAAY;AACd;;AAEA;EACE,8BAA8B;AAChC;;AAEA;EACE,8BAA8B;AAChC;;AAEA;EACE,8BAA8B;EAC9B,SAAS;EACT,YAAY;AACd;;AAEA;EACE,8BAA8B;AAChC;;AAEA;EACE,8BAA8B;AAChC;;AAEA;EACE,kCAAkC;EAClC,SAAS;EACT,YAAY;AACd;;AAEA;EACE,6BAA6B;AAC/B;;AAEA;EACE,6BAA6B;AAC/B;;AAEA;EACE,qBAAqB;EACrB,sCAAsC;EACtC,4BAA4B;EAC5B,gBAAgB;EAChB,6BAA6B;EAC7B,wDAAwD;EACxD,6DAA6D;EAC7D,sCAAsC;EACtC,kBAAkB;AACpB;;AAEA;EACE,0CAA0C;AAC5C;;AAEA;EACE,YAAY;EACZ,gBAAgB;EAChB,0CAA0C;AAC5C\",\"sourcesContent\":[\"/*-----------------------------------------------------------------------------\\n| Variables\\n|----------------------------------------------------------------------------*/\\n\\n:root {\\n  --jp-flat-button-height: 24px;\\n  --jp-flat-button-padding: 8px 12px;\\n}\\n\\n/*-----------------------------------------------------------------------------\\n| Copyright (c) Jupyter Development Team.\\n| Distributed under the terms of the Modified BSD License.\\n|----------------------------------------------------------------------------*/\\n\\nbutton {\\n  border-radius: var(--jp-border-radius);\\n}\\n\\nbutton.jp-mod-styled.jp-mod-accept {\\n  background: var(--md-blue-500);\\n  border: 0;\\n  color: white;\\n}\\n\\nbutton.jp-mod-styled.jp-mod-accept:hover {\\n  background: var(--md-blue-600);\\n}\\n\\nbutton.jp-mod-styled.jp-mod-accept:active {\\n  background: var(--md-blue-700);\\n}\\n\\nbutton.jp-mod-styled.jp-mod-reject {\\n  background: var(--md-grey-500);\\n  border: 0;\\n  color: white;\\n}\\n\\nbutton.jp-mod-styled.jp-mod-reject:hover {\\n  background: var(--md-grey-600);\\n}\\n\\nbutton.jp-mod-styled.jp-mod-reject:active {\\n  background: var(--md-grey-700);\\n}\\n\\nbutton.jp-mod-styled.jp-mod-warn {\\n  background: var(--jp-error-color1);\\n  border: 0;\\n  color: white;\\n}\\n\\nbutton.jp-mod-styled.jp-mod-warn:hover {\\n  background: var(--md-red-600);\\n}\\n\\nbutton.jp-mod-styled.jp-mod-warn:active {\\n  background: var(--md-red-700);\\n}\\n\\n.jp-Button-flat {\\n  text-decoration: none;\\n  padding: var(--jp-flat-button-padding);\\n  color: var(--jp-warn-color1);\\n  font-weight: 500;\\n  background-color: transparent;\\n  height: var(--jp-private-running-shutdown-button-height);\\n  line-height: var(--jp-private-running-shutdown-button-height);\\n  transition: background-color 0.1s ease;\\n  border-radius: 2px;\\n}\\n\\n.jp-Button-flat:hover {\\n  background-color: rgba(153, 153, 153, 0.1);\\n}\\n\\n.jp-Button-flat:focus {\\n  border: none;\\n  box-shadow: none;\\n  background-color: rgba(153, 153, 153, 0.2);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_AT_RULE_IMPORT_0___ from \"-!../node_modules/css-loader/dist/cjs.js!./base.css\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.i(___CSS_LOADER_AT_RULE_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!./buttons.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../node_modules/css-loader/dist/cjs.js!./index.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};"],"sourceRoot":""}